<script type="text/ng-template" id="itemType.html">
	<a tabindex="-1">
		<img src="http://image.eveonline.com/Type/{{match.model.typeID}}_32.png" />
		<label>{{match.model.typeName}}</label>
	</a>
</script>


<div class="header">
  <ul class="nav nav-pills pull-right">
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
    <li><a href="#">Price check</a></li>
  </ul>
  <h3 class="text-muted">EVE Monitor</h3>
</div>

<div class="form-horizontal">
	<div class="form-group">
		<label for="item" class="col-sm-2 control-label">Item: </label>
		<div class="col-sm-8">
			<input id="item" type="text" ng-model="selectedItemName" typeahead-on-select="onSelect($item)" typeahead-wait-ms="300" typeahead="k for k in searchItem($viewValue) | limitTo:20" class="form-control" typeahead-template-url="itemType.html">
		</div>
		<div class="col-sm-2">
			<button ng-click="addSelectedItem()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button>
		</div>
	</div>
	<div class="form-group">
		<span class="col-sm-offset-2 col-sm-8">OR</span>
	</div>
	<div class="form-group">
		<label for="char" class="col-sm-2 control-label">Character: </label>
		<div class="col-sm-8">
			<select class="form-control" ng-model="selectedCharName" ng-options="char for char in chars">
				<option value="">-- select char --</option>
			</select>
		</div>
		<div class="col-sm-2">
			<button ng-click="fecthFromChar()" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button>
		</div>
	</div>
	<div class="form-group">
		<label for="station" class="col-sm-2 control-label">Station: </label>
		<div class="col-sm-8">
			<input id="station" type="text" ng-model="selectedStationName" typeahead-on-select="onSelectStation($item)" typeahead-wait-ms="300" typeahead="k.stationName for k in searchStation($viewValue) | limitTo:20" class="form-control">
		</div>
		<div class="col-sm-2">
			&nbsp;
		</div>
	</div>
</div>

<br />

<table class="table">
	<thead>
		<tr>
			<td>#</td>
			<td>Name</td>
			<td>Local sell</td>
			<td>Local buy</td>
			<td>Local margin</td>
			<td>Jita sell</td>
			<td>Jita buy</td>
			<td>Margin local vs. Jita sell</td>
		</tr>
	</thead>
	<tbody>
		<tr ng-repeat="item in selectedItems">
			<td><img src="http://image.eveonline.com/Type/{{item.typeID}}_32.png" /></td>
			<td>{{item.typeName}}</td>
			<td>{{item.localsell | currency:""}}</td>
			<td>{{item.localbuy | currency:""}}</td>
			<td ng-class="getMargin(item.localsell, item.localbuy) < 0 ? 'danger' : getMargin(item.localsell, item.localbuy) >= 10 ? 'success' : getMargin(item.localsell, item.localbuy) >= 5 ? 'warning' : ''">{{getMargin(item.localsell, item.localbuy) | number:0}}</td>
			<td>{{item.jitasell | currency:""}}</td>
			<td>{{item.jitabuy| currency: ""}}</td>
			<td ng-class="getMargin(item.localsell, item.jitasell) < 0 ? 'danger' : getMargin(item.localsell, item.jitasell) >= 10 ? 'success' : getMargin(item.localsell, item.jitasell) >= 5 ? 'warning' : ''">{{getMargin(item.localsell, item.jitasell) | number:0}}</td>
		</tr>
	</tbody>	
</table>

<div class="center-block text-center">
	<button class="btn btn-primary btn-lg" ng-click="fetchPrices()">Fetch prices</button>
</div>